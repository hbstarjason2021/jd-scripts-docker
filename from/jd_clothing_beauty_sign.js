/*
活动名称：服饰美妆签到

cron: 35 4 * * * jd_clothing_beauty_sign.js

*/

const $ = new Env('服饰美妆签到')
var iｉl='jsjiami.com.v7';const lIII1i=iii1II;(function(liliI,ll1lI,l1iii,IIlli,l1iil,ii1l1,lIIill){return liliI=liliI>>0x1,ii1l1='hs',lIIill='hs',function(I11iIi,I1ilII,I11iIl,l1l11l,IilIil){const lI11Il=iii1II;l1l11l='tfi',ii1l1=l1l11l+ii1l1,IilIil='up',lIIill+=IilIil,ii1l1=I11iIl(ii1l1),lIIill=I11iIl(lIIill),I11iIl=0x0;const l1iIi=I11iIi();while(!![]&&--IIlli+I1ilII){try{l1l11l=-parseInt(lI11Il(0x1cb,'0NBh'))/0x1+-parseInt(lI11Il(0x1b3,'lSLe'))/0x2*(-parseInt(lI11Il(0x1be,'G6Bl'))/0x3)+-parseInt(lI11Il(0x172,'DJm0'))/0x4+-parseInt(lI11Il(0x1b1,'Zzdy'))/0x5*(parseInt(lI11Il(0x170,'sEms'))/0x6)+parseInt(lI11Il(0x188,'70nO'))/0x7+-parseInt(lI11Il(0x1df,'6#Gr'))/0x8+parseInt(lI11Il(0x20e,'N3Fv'))/0x9*(parseInt(lI11Il(0x1ce,'HF!J'))/0xa);}catch(l1l11i){l1l11l=I11iIl;}finally{IilIil=l1iIi[ii1l1]();if(liliI<=IIlli)I11iIl?l1iil?l1l11l=IilIil:l1iil=IilIil:I11iIl=IilIil;else{if(I11iIl==l1iil['replace'](/[qunJQglGCTxyYEDXFLhI=]/g,'')){if(l1l11l===I1ilII){l1iIi['un'+ii1l1](IilIil);break;}l1iIi[lIIill](IilIil);}}}}}(l1iii,ll1lI,function(l1iIl,illIll,iIli1I,Iiil1,iiilli,l1iIIl,iiilll){return illIll='\x73\x70\x6c\x69\x74',l1iIl=arguments[0x0],l1iIl=l1iIl[illIll](''),iIli1I=`\x72\x65\x76\x65\x72\x73\x65`,l1iIl=l1iIl[iIli1I]('\x76'),Iiil1=`\x6a\x6f\x69\x6e`,(0x159f84,l1iIl[Iiil1](''));});}(0x18e,0xa0155,Iii11l,0xc9),Iii11l)&&(iｉl=`\x245`);const jdCookie=require(lIII1i(0x19d,'zNrX')),notify=require('./utils/Rebels_sendJDNotify'),common=require(lIII1i(0x183,'c!OD')),{H5st}=require(lIII1i(0x1e3,'HF!J')),isNotify=![];let cookie='';const cookiesArr=Object[lIII1i(0x1e1,'E$I0')](jdCookie)[lIII1i(0x1fb,'HF!J')](IIlii=>jdCookie[IIlii])['filter'](IlI1il=>IlI1il);!cookiesArr[0x0]&&($[lIII1i(0x1a8,'HF!J')]($['name'],lIII1i(0x187,'zNGm')),process[lIII1i(0x16c,'BBr$')](0x1));!(async()=>{const l11i11=lIII1i,IilliI={'vhpfD':l11i11(0x1db,'mxw5'),'JeKpL':'若异常，请使用本地网络环境运行\x0a','XXbRx':function(IlI1ii,lIIiii){return IlI1ii<lIIiii;},'cbeIk':function(iI1lli,ll1iI){return iI1lli!==ll1iI;},'xrtui':l11i11(0x1f9,'lSLe'),'nOMJC':function(iI1lll,l1lIll){return iI1lll+l1lIll;},'zXCYU':function(I1l1II,IIli1I){return I1l1II(IIli1I);},'vwQYa':l11i11(0x1ec,'9g08'),'TziiD':function(I1i11I){return I1i11I();}};console['log'](IilliI[l11i11(0x1e2,'lSLe')]),notify[l11i11(0x173,'UHQ[')]({'title':$[l11i11(0x19f,'*!]g')]});for(let llIliI=0x0;IilliI[l11i11(0x1d4,'N3Fv')](llIliI,cookiesArr[l11i11(0x185,'EcDD')]);llIliI++){if(IilliI[l11i11(0x16a,'2!eR')](IilliI[l11i11(0x1a3,'2!eR')],IilliI[l11i11(0x1bb,'G6Bl')]))lilIl1[l11i11(0x203,'Zzdy')](i1l1ii['name'],IilliI['vhpfD']),i1l1[l11i11(0x1c3,'3jHg')](0x1);else{$[l11i11(0x1f6,'6j7k')]=IilliI['nOMJC'](llIliI,0x1),cookie=cookiesArr[llIliI],common[l11i11(0x201,'zNrX')](cookie),$[l11i11(0x1d0,'*!]g')]=IilliI[l11i11(0x1b0,'bnrY')](decodeURIComponent,common[l11i11(0x17f,'zNrX')](cookie,IilliI['vwQYa'])),$['UA']=common[l11i11(0x1ee,'2!eR')]($[l11i11(0x1c7,'mxw5')]),$['message']=notify['create']($['index'],$[l11i11(0x20a,'N*U5')]),$[l11i11(0x1d1,'EcDD')]='',console['log']('\x0a******开始【京东账号'+$['index']+'】'+($[l11i11(0x200,'le1L')]||$['UserName'])+'******\x0a'),await IilliI['TziiD'](Main),common[l11i11(0x1c8,'lSLe')]();if($[l11i11(0x1ed,'lSLe')])break;await $[l11i11(0x1d3,'[gZx')](0x3e8);}}isNotify&&notify['getMessage']()&&(notify['updateContent'](IilliI[l11i11(0x1c5,'N*U5')](notify[l11i11(0x178,'BgZR')],l11i11(0x1c1,'BBr$'))),await notify[l11i11(0x186,'EcDD')]());})()[lIII1i(0x1cc,'N*U5')](I1i111=>$['logErr'](I1i111))[lIII1i(0x19e,'6j7k')](()=>$[lIII1i(0x207,'dfkr')]());function iii1II(_0xdfd168,_0x589fb2){const _0x492884=Iii11l();return iii1II=function(_0x351373,_0x4dd1b3){_0x351373=_0x351373-0x162;let _0x2612ed=_0x492884[_0x351373];if(iii1II['sxfIrN']===undefined){var _0x20a85d=function(_0x3aefab){const _0x16b0c5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3e6928='',_0x400e3a='';for(let _0x4b0016=0x0,_0x38cbf2,_0x53f196,_0x70125c=0x0;_0x53f196=_0x3aefab['charAt'](_0x70125c++);~_0x53f196&&(_0x38cbf2=_0x4b0016%0x4?_0x38cbf2*0x40+_0x53f196:_0x53f196,_0x4b0016++%0x4)?_0x3e6928+=String['fromCharCode'](0xff&_0x38cbf2>>(-0x2*_0x4b0016&0x6)):0x0){_0x53f196=_0x16b0c5['indexOf'](_0x53f196);}for(let _0x95895e=0x0,_0x257f4f=_0x3e6928['length'];_0x95895e<_0x257f4f;_0x95895e++){_0x400e3a+='%'+('00'+_0x3e6928['charCodeAt'](_0x95895e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x400e3a);};const _0x4fc07d=function(_0x307244,_0x629c7f){let _0x122eca=[],_0x5158d2=0x0,_0x5832ec,_0x3d9cf5='';_0x307244=_0x20a85d(_0x307244);let _0x152677;for(_0x152677=0x0;_0x152677<0x100;_0x152677++){_0x122eca[_0x152677]=_0x152677;}for(_0x152677=0x0;_0x152677<0x100;_0x152677++){_0x5158d2=(_0x5158d2+_0x122eca[_0x152677]+_0x629c7f['charCodeAt'](_0x152677%_0x629c7f['length']))%0x100,_0x5832ec=_0x122eca[_0x152677],_0x122eca[_0x152677]=_0x122eca[_0x5158d2],_0x122eca[_0x5158d2]=_0x5832ec;}_0x152677=0x0,_0x5158d2=0x0;for(let _0x432411=0x0;_0x432411<_0x307244['length'];_0x432411++){_0x152677=(_0x152677+0x1)%0x100,_0x5158d2=(_0x5158d2+_0x122eca[_0x152677])%0x100,_0x5832ec=_0x122eca[_0x152677],_0x122eca[_0x152677]=_0x122eca[_0x5158d2],_0x122eca[_0x5158d2]=_0x5832ec,_0x3d9cf5+=String['fromCharCode'](_0x307244['charCodeAt'](_0x432411)^_0x122eca[(_0x122eca[_0x152677]+_0x122eca[_0x5158d2])%0x100]);}return _0x3d9cf5;};iii1II['dlQpVy']=_0x4fc07d,_0xdfd168=arguments,iii1II['sxfIrN']=!![];}const _0x521529=_0x492884[0x0],_0x23a73d=_0x351373+_0x521529,_0x45fb7b=_0xdfd168[_0x23a73d];return!_0x45fb7b?(iii1II['RpIyJg']===undefined&&(iii1II['RpIyJg']=!![]),_0x2612ed=iii1II['dlQpVy'](_0x2612ed,_0x4dd1b3),_0xdfd168[_0x23a73d]=_0x2612ed):_0x2612ed=_0x45fb7b,_0x2612ed;},iii1II(_0xdfd168,_0x589fb2);}function Iii11l(){const lilIi=(function(){return[...[iｉl,'ygjXxsCnjqDiamiyT.cQEXomX.GuJv7lYFhnLDIX==','o8o0k8kuFgSLudW','W5NORQVMSRxLPOVOTPqH4P6HWRZML7xLK5NLUAVMLQ7MJ7C','oCkrWOO','WPZcR8kF','D8kKW4S','EH/cTmkPva','mSovCmo3','W7nMWRxcPre','wSkKW6iGrW','DWPGd8oyWPBdNHC','WROZWPNdJSouB0NcSufTWO/cUW','W5WhWQy','WOSvsJb2','WRVdIfJcQZJcPX7cR8k4WQhcJ1O','hrLl','W7yAWRe','WOJdJ2vrWQO','W5nKW6NcKCo4W7Gp','W63cJhC','4P6OW63MNAtNN6ZORlFMSkdcSW','dSo4WQyyW7q3nSoxWPmuWQfH','iCo7W6LGWRO','W4fQW7tcNmoWW6O','cMFdS8klCW','W53cRSkMW63dK8oMWRW','pCk/WO4e','W7HTz8oFW6e','WPBcOrxdHa','wflcMaldJG','WOFdV1niCmo7W5GbBSo8WRtdQa','W5/dPILWs8ktnuT/da','WQWYrSohrXDIh8o+iWhcVSoT','WQa9FbTAqW','WO7cPHZdPCku','8lw5VCkh','ASk+W409qfZdR8kf','8ywDICof56+O5yQd5OUx5yIZ776v6i6u5BYS','WPZdTerFWOFdR8kc','jCowrmo1Cq','4P+pd+IhGEAFS+I+L+IJQ+MaMEwiQUs7HEMuJoISPuW','WOpcUCkpumkOcgFdGSk2omkt','w+IUH+AXSEwLKoI3T8of4P2uWRe','wGbmf8oq','mvldKmk0tq','l8o0k8kuFgSLudZcMSotW78LW40','W4uAWRdcMce','FYldKSkKka','esv5n8k0','vSknW7bTWR53WOlcTCkTWPhdTqOXCLdcGr0Txc/dIeqA','4P6HqoIgUoAEJoI8PEIJUoMbH+wiNEs6HoMxGEITTCox','W5WnWQ/cRcCJ','W4aDWRlcOW','44c45O6r56AU44oW6k6P5yws6i+D5yY6AmoZntfUyq','W4HOW4tcJSkenWVdPhbzWP7cUSo3','W4VcNq3dT2q','p8keWRq2BW','W5JcT8obWQxdRG'],...(function(){return[...['eKXNW49e','W7jIiq','6lEK5y+d5PwL5Pwp','rrXXmCo5WPddMHWOW5/dML7cSWu','orhdJG','WRtdN2DsWRO','W4BdU0BcJmoKW5NcIfJdSdlcPCoa','BCkXWRpcISkmk0a','amoGWPe0W6q','FmkGW71DWQLQjSksWOqpWQnl','W6FdKmk1eGO','WPZdQCozW7JcNftcOq','W7OEtW','WPpdTe0','WPj7W5zt','iSoJW7hcGSoz','ACkUW50MuuBdRW','zSk+nCkZugSHuJdcQq','W4ZcV8ojWO3dRmkRW68','W6/cGN3cJq','W7OurSk7W4pcUW','W7BdR8kc','W6lcKaFdVa','exFdOSk3Cq','oCkhWP5HwfVcQq','WONcQd16WQefW7y','xaNcNCk9u8oKWPyRg8k8W456W699','W77cTJtdQ0q','sW8X','W5XUW7xcJSo8W74e','W6DaWPlcStpdGIX7ighcOZdcR8oUWRTSWRTKhJTiWR5c','W6JcNfFdQ0hdSWlcRmkPWOpdOfi/pcfqlIddQmkecxe3nmkhkSou','FmkOACoUjduuscVcQSoKW5a','W4JcR8k1W4ZdVG','EtJdGq','yr4CW67cKq','scWqWQBdPq','zCosWOHaqh3cQaW','W5NcO8ofWQ/dR8kJW7m','WRlcHCoiW4tdMXdcPSklaZfora','qXpcMq','rcxdPCkYWP4','z8kXWRtcSCoyp1e','WPldRmoDW5lcMvBcP8otFgxcG8o7WQJdJ8olFYNcO0BdK8o8W5tdUZGxvrBcLxZdLSkbWO/dLa','WRldGSoz','m8oXAWKMaSk0ncn9cW','WR3dLmoyW4BcOa','rvpcUbJdHq','WOJcOIK','W53dG8k+aYK','dbNcLqZdUNL8W50','W4pdLWn6lG','qW4KWPns','uUAFIUMML+E/VUwMMUESQowiMa','WOfDW7FdUMn9a8k6hSo/W7VcQmkm','WQDmW6XZ','yGicW47cPq','tdzin8ov','8k2mMh/NRQNLIkpMIjtLI5hVVlxOJ67LVzS'],...(function(){return['WPBdIZeKWObiW7vm','W7xdNSkmWPdcMghcN8kLlI18','hColW5FcJW','W7hdTqHzdW','f8orhsNcHLjQmNXkW5D9','qrHXhSo+','uGu3W6JcNCkpW5uk','f01MWRTIuhyBya','vCkUW5SxuuxdUSkoW6KWWQnUWOBcOtmmEmkW','W5tcKhxcMSo6W7m2W4m','W54bWQlcOb0QwSk5','W7ldMmkhWOFcIG','BmkQW4uN','W5FcQqZdGhC','WOlcVCkvvmo3a2BdOSk/n8ks','WPtcGWTNWRi','W5ufWRhcVYO','WOatW4u','W5NcKCkiW5tdHW','W4ddUCkeoeq','44ot5O2O56wU44gh6kY55ywH6iYV5y+/CMykWOb/WRG','W7KexmkAW5VcSGi','W43dO8kJdMG','W53cR8k3W6FdMmoYWQBdPSkk','pmoHW7ldTmknAhPpW7O1uK4','WQ/dV8o6WOBdQW','ebvkeG','W4RdLCk0WOxcOa','cfmJWOHjthjzymkOvqRcGIePba','mmotrHeF','mr/dNCoc','4P2KyEAEVUIaNoASVEEHTowLRUEtQGS','W7FdOCkmjq','WRFdQCouWO3dTG','W5JdT8kNcX1vWQ0CdLiSWOWyWQuycs8uW4y','DSk4W4S','WOZcQc9TWQuqW6a','W6yfD8kSW57cVq','W7ldHCkrWRdcGKy','dMddUmkxwq','fGnu','WOxcT3WZ','mSkMWOLGAW','W5ybWRK','wdhcPCo2lx3cHSolEc3dVSkSW54','WPBcQdLOWRigW6bQvXdcSG','8kMzRmoh','W4pcUmodWONdUa','WQTBW7y','xHS0','W5pdQSkOWP3cLq','jCooBmo7v8k5W40VEq','sX0M','W6ues8k/W5lcObBcKmoVpCk9W6NcL8ks','sHSJWQFdKW','W5lcRHijjSkOW5u','yYLDjCou','l8o9FWmAb8kQga'];}())];}())];}());Iii11l=function(){return lilIi;};return Iii11l();};async function Main(){const IilIl1=lIII1i,ilI1li={'TdSTe':function(ilI1ll,Iillii){return ilI1ll===Iillii;},'vXzxN':function(IlI1iI,Iillil){return IlI1iI!==Iillil;},'qRDJp':IilIl1(0x191,'BgZR'),'KQvQD':IilIl1(0x1a2,'N3Fv'),'APXXB':function(l1lIli,lIIiiI){return l1lIli!==lIIiiI;},'WcFEv':IilIl1(0x1bd,'8(qS')},IIliI=await common[IilIl1(0x18f,'N*U5')](cookie);if(!IIliI&&ilI1li['TdSTe'](typeof IIliI,IilIl1(0x164,'$ulU'))){if(ilI1li['vXzxN'](ilI1li[IilIl1(0x1e0,'gzj6')],ilI1li['qRDJp']))li1Ii[IilIl1(0x1a9,'$ulU')][IilIl1(0x20f,'E$I0')](Iliiii);else{console[IilIl1(0x199,'BgZR')](IilIl1(0x18e,'3jHg'));return;}}try{await sendRequest(ilI1li['KQvQD']);}catch(IIli1l){ilI1li[IilIl1(0x1ff,'N*U5')](ilI1li[IilIl1(0x181,'zNGm')],ilI1li[IilIl1(0x1dd,'lg!O')])?(i1III['outFlag']=!![],Ii1iIi[IilIl1(0x1b6,'6#Gr')]&&iliIIi[IilIl1(0x1a4,'Zzdy')]['fix'](ill11I)):console['log'](IilIl1(0x17a,'KQ2w')+IIli1l);}}async function handleResponse(lIIii1,ll1i1){const lIII1l=lIII1i,IIli1i={'MwYXu':lIII1l(0x20b,'70nO'),'wTOzH':'签到成功','ZyasZ':'KXIiY','ArTHL':function(I1iIi1,lliil1){return I1iIi1===lliil1;},'xyIjF':lIII1l(0x16d,'0wku'),'wSrZG':lIII1l(0x209,'[gZx'),'UcJwb':lIII1l(0x18d,'UHQ['),'qBWOK':function(IIllI,lliilI){return IIllI!==lliilI;},'AdFpU':lIII1l(0x1ca,'cdDv'),'gCSFs':'cAgKH'};try{if(IIli1i['ZyasZ']!==IIli1i[lIII1l(0x1da,'lg!O')])i1l11[lIII1l(0x1a1,'lg!O')](i1l1li),i1ilii&&(i1ilil[lIII1l(0x1dc,'9g08')]=!![],lilIii['message']&&llIli1[lIII1l(0x1a5,'sPq]')]['fix'](iliIII));else switch(lIIii1){case lIII1l(0x1c9,'AZkZ'):if(IIli1i['ArTHL'](ll1i1['code'],'0'))switch(ll1i1[lIII1l(0x1b2,'6j7k')]){case'0':ll1i1?.[lIII1l(0x17b,'FE^F')]?.['successRewards']['3']?.[lIII1l(0x1a0,'9g08')]?console['log'](lIII1l(0x177,'$0#N')+ll1i1[lIII1l(0x1f4,'sPq]')][lIII1l(0x1fc,'9g08')]['3'][0x0]?.[lIII1l(0x176,'[gZx')]+'京豆'):IIli1i['ArTHL'](IIli1i[lIII1l(0x17d,'N*U5')],IIli1i['wSrZG'])?(delete i1l1I['body'],delete IiilIi['headers'][IIli1i[lIII1l(0x194,'G!nC')]]):console['log'](IIli1i[lIII1l(0x163,'BgZR')]);break;case IIli1i[lIII1l(0x206,'ZU]d')]:console[lIII1l(0x20c,'EcDD')]('今日已签');break;case lIII1l(0x1f0,'cdDv'):console[lIII1l(0x190,'69#k')](ll1i1[lIII1l(0x1ef,'E$I0')]);break;default:console['log'](ll1i1[lIII1l(0x1d8,'AxEx')]);break;}else ll1i1[lIII1l(0x1ae,'qBX$')]?IIli1i['qBWOK'](lIII1l(0x20d,'UHQ['),lIII1l(0x208,'KQ2w'))?console[lIII1l(0x1b8,'gzj6')](ll1i1[lIII1l(0x204,'FE^F')]):II1Ii[lIII1l(0x1bc,'sPq]')](i1ii[lIII1l(0x1ea,'[gZx')]):console['log']('❓'+lIIii1+'\x20'+JSON[lIII1l(0x1de,'na%i')](ll1i1));break;}}catch(IllIIl){IIli1i[lIII1l(0x1c4,'!@E]')](IIli1i['AdFpU'],IIli1i[lIII1l(0x18a,'BBr$')])?lilIlI['log'](IIli1i[lIII1l(0x1bf,'cdDv')]):console[lIII1l(0x1f8,'bnrY')](lIII1l(0x1e6,'zNGm')+lIIii1+'\x20请求响应\x20'+(IllIIl['message']||IllIIl));}}async function sendRequest(l1ii1){const l1iIIi=lIII1i,ii1ll={'rafIn':l1iIIi(0x19a,'3jHg'),'ftpBH':l1iIIi(0x1aa,'KQ2w'),'CyoXr':l1iIIi(0x1cf,'[gZx'),'esTob':'oRnJWzu84htA5EMrgQohdtjUp8b','zqlDK':l1iIIi(0x1ab,'N3Fv'),'RIOcG':l1iIIi(0x162,'3jHg'),'xopXc':'application/json,\x20text/plain,\x20*/*','NHuxP':'gzip,\x20deflate,\x20br','zhmXG':'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,en-GB;q=0.6','urqSr':'api.m.jd.com','qGZyK':'https://h5.m.jd.com','uvJFS':l1iIIi(0x1d7,'EcDD'),'iDjAm':'cors','YYlym':l1iIIi(0x1d5,'FE^F'),'BnJhx':'GET','Dlcek':function(IIll1,ll1il){return IIll1!==ll1il;},'Expkv':l1iIIi(0x1d2,'lSLe'),'XBfUv':l1iIIi(0x182,'E$I0'),'XWFvU':function(IiiIiI,lilii){return IiiIiI>lilii;},'pNEnr':function(l1iiI,ll1li,Illl1I){return l1iiI(ll1li,Illl1I);},'fDdrR':'ZZgce','wJMZq':function(lliiiI,lilil){return lliiiI!==lilil;},'PnCbP':'lehcP','slZgH':'ksSFi'};if($['runEnd']||$[l1iIIi(0x197,'mawp')])return;let IliI1l='',lliiil={},lliiii=ii1ll[l1iIIi(0x18b,'6j7k')];switch(l1ii1){case l1iIIi(0x1e7,'lg!O'):req={'appId':l1iIIi(0x18c,'HF!J'),'functionId':ii1ll[l1iIIi(0x1ad,'na%i')],'appid':ii1ll['CyoXr'],'clientVersion':common[l1iIIi(0x1e9,'8(qS')](),'client':l1iIIi(0x1f7,'3jHg'),'body':{'sourceCode':'ace20230504MZPD','clientInfo':{'ip':'link\x20#22'},'encryptProjectId':ii1ll[l1iIIi(0x16f,'G6Bl')],'encryptAssignmentId':ii1ll['zqlDK'],'itemId':'1','completionFlag':!![],'actionType':0x0},'version':ii1ll[l1iIIi(0x19b,'AZkZ')],'ua':$['UA'],'t':!![]};const ll1ll=await H5st[l1iIIi(0x193,'6#Gr')](req);IliI1l='https://api.m.jd.com/api?',lliiil=''+ll1ll?.[l1iIIi(0x169,'$ulU')];break;default:console[l1iIIi(0x165,'*!]g')](l1iIIi(0x166,'sPq]')+l1ii1);return;}const IliI1i={'url':IliI1l,'method':lliiii,'headers':{'Accept':ii1ll[l1iIIi(0x1fd,'bnrY')],'Accept-Encoding':ii1ll[l1iIIi(0x1ba,'mawp')],'Accept-Language':ii1ll[l1iIIi(0x174,'^kkP')],'Connection':l1iIIi(0x171,'cdDv'),'Content-Type':l1iIIi(0x1b7,'mawp'),'Cookie':cookie,'Host':ii1ll[l1iIIi(0x180,'EcDD')],'Referer':ii1ll[l1iIIi(0x1e4,'le1L')],'Origin':ii1ll[l1iIIi(0x1a7,'N3Fv')],'Sec-Fetch-Dest':ii1ll['uvJFS'],'Sec-Fetch-Mode':ii1ll[l1iIIi(0x1e8,'gzj6')],'Sec-Fetch-Site':ii1ll[l1iIIi(0x168,'c!OD')],'User-Agent':$['UA']},'body':lliiil,'timeout':0x7530};lliiii===ii1ll[l1iIIi(0x1af,'!@E]')]&&(delete IliI1i[l1iIIi(0x16e,'^kkP')],delete IliI1i[l1iIIi(0x1eb,'sPq]')][l1iIIi(0x167,'G!nC')]);const ll1ii=0x1;let IIli11=0x0,IllIII=null,ii1li=![];while(IIli11<ll1ii){if(ii1ll[l1iIIi(0x189,'N3Fv')](ii1ll['Expkv'],ii1ll[l1iIIi(0x196,'8(qS')])){ii1ll[l1iIIi(0x17e,'2!eR')](IIli11,0x0)&&await $['wait'](0x3e8);const Illl11=await common[l1iIIi(0x19c,'[gZx')](IliI1i);if(!Illl11[l1iIIi(0x16b,'na%i')]){IllIII=l1iIIi(0x1f5,'BBr$')+l1ii1+l1iIIi(0x17c,'E$I0')+Illl11[l1iIIi(0x1c0,'HF!J')],IIli11++;continue;}if(!Illl11?.['data']){IllIII=l1iIIi(0x175,'6j7k')+l1ii1+l1iIIi(0x202,'70nO'),IIli11++;continue;}ii1ll[l1iIIi(0x1d6,'sPq]')](handleResponse,l1ii1,Illl11[l1iIIi(0x1e5,'69#k')]),ii1li=![];break;}else IlI11[l1iIIi(0x205,'[gZx')](l1iIIi(0x1c6,'zNrX')+iIIIIl[l1iIIi(0x1b9,'le1L')][l1iIIi(0x1a6,'ZU]d')]['3'][0x0]?.[l1iIIi(0x1cd,'!@E]')]+'京豆');}IIli11>=ll1ii&&(ii1ll[l1iIIi(0x1f1,'Zzdy')]===ii1ll['fDdrR']?(console[l1iIIi(0x1b4,'ZU]d')](IllIII),ii1li&&(ii1ll[l1iIIi(0x1d9,'na%i')](ii1ll[l1iIIi(0x1b5,'qBX$')],ii1ll[l1iIIi(0x179,'dfkr')])?($['outFlag']=!![],$['message']&&$[l1iIIi(0x1fe,'sEms')][l1iIIi(0x1f2,'EcDD')](IllIII)):i1l1l1['log'](l1iIIi(0x184,'AxEx')+IlI1I))):IiilII[l1iIIi(0x198,'9g08')]('❓'+IliI1I+'\x20'+lI1Iii[l1iIIi(0x1fa,'dfkr')](i1li)));}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
